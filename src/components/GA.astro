---
import { GOOGLE_ANALYTICS_TAG } from 'astro:env/server';
---

<!-- Google tag (gtag.js) -->
<script
  type="text/partytown"
  is:inline
  src=`https://www.googletagmanager.com/gtag/js?id=${GOOGLE_ANALYTICS_TAG}`
></script>
<script type="text/partytown" is:inline define:vars={{ GOOGLE_ANALYTICS_TAG }}>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    // eslint-disable-next-line prefer-rest-params
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', GOOGLE_ANALYTICS_TAG, {
    anonymize_ip: true,
  });
</script>
