---
import { MarkdownHeading } from 'astro';
import '@unocss/reset/tailwind.css';
import 'wicg-inert';
import BaseHead from '@/components/BaseHead.astro';
import Header from '@/components/Header.astro';
import SideBar from '@/components/SideBar.astro';
import Footer from '@/components/Footer.astro';
import Menu from '@/components/Menu.astro';
import NavLinkList from '@/components/NavLinkList.astro';
import AnchorLinkList from '@/components/AnchorLinkList.astro';
import '@/styles/global.scss';

type Props = {
  title?: string;
  description?: string;
  noTopHeading?: boolean;
  markdownHeadings?: MarkdownHeading[];
};

const { title, description, noTopHeading, markdownHeadings = [] } = Astro.props;
const isMarkdownPage = markdownHeadings?.length !== 0;
---

<!DOCTYPE html>
<html lang="ja" class="h-full">
  <head>
    <BaseHead title={title} description={description} />
  </head>

  <body
    class="h-full flex flex-col break-words bg-slate-100 text-left font-sawarabi leading-6 text-slate-800"
  >
    <div id="base-contents" class="min-h-full flex flex-col">
      <Header noTopHeading={noTopHeading} isMarkdownPage={isMarkdownPage} />
      <main class="flex-shrink-0 flex-grow-1 flex-basis-auto">
        <div class="my-8">
          <div class="mx-auto flex px-4 container">
            <div class="hidden place-self-auto lg:block">
              <SideBar markdownHeadings={markdownHeadings} />
            </div>
            <div
              class="max-w-full flex-grow-1 overflow-x-hidden rounded-2 bg-white p-6 lg:ml-6"
            >
              <slot />
            </div>
          </div>
        </div>
      </main>
      <Footer />
    </div>
    <Menu type="nav">
      <NavLinkList />
    </Menu>
    <Menu type="anchor">
      <AnchorLinkList markdownHeadings={markdownHeadings} />
    </Menu>
    <script>
      import '@/scripts/menu';
    </script>
  </body>
</html>
